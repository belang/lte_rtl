#! $PATH/python
# -*- coding: utf-8 -*-

# file name: test_scramble.py
# author: lianghy
# time: 12/30/2020 3:08:30 PM

"""test scramble with nuanfeng."""

import sys
sys.path.append("E:\\work\\public_tools\\nuanfeng")

from nuanfeng.func_model import *
import ctypes

def test_pseudo_generator():
    seq = [('case 1', ('sequence 1', (('top.dut.c_init', '0'), ('top.dut.size_bq', '20'),),),)]
    result = [('case 1', ('sequence 1', (('top.dut.c_q', """000000000000000001100000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"""),),),)]
    dut = xxx
    top = TestBench(seq, result, dut)

class Pseudo(Module):
    """docstring for Pseudo"""
    def __init__(self):
        super(Pseudo, self).__init__()
        self.i_c_init = Input()
        self.i_size_bq = Input()
        self.o_c_q = Output()
        #pseudo = ctypes.CDLL("./pseudo_random_sequence_generation.o")
        ctypes.cdll.LoadLibrary("./pseudo_random_sequence_generation.o")
        pseudo = ctypes.cdll
    def func(self):
        """docstring for func"""
        self.o_c_q = pseudo.pseudo_random_sequence_generation( ctypes.c_float(self.i_c_init), ctypes.c_int(self.i_size_bq))

pp = Pseudo()
pp.i_c_init = 2**14 + 2**13 + 1
pp.i_size_bq = 20
print(self.o_c_q)
if __name__ == "__main__":
    print("test_scramble.py")
